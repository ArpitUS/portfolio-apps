import React,{useEffect,useState}from'react';import{Canvas}from'@react-three/fiber';import{OrbitControls,useGLTF,Html,useProgress}from'@react-three/drei';import api from'../api';function Loader(){const{progress}=useProgress();return<Html center>{progress.toFixed(0)}%</Html>}function Model({url}){const g=useGLTF(url,true);return<primitive object={g.scene}/>;}export default function Viewer3D({project}){const[url,setUrl]=useState(null);useEffect(()=>{if(project)setUrl(api.getFileUrl(project.id));},[project]);if(!project)return null;return(<div style={{height:'500px'}}><Canvas camera={{position:[0,2,6]}}><ambientLight/><directionalLight position={[10,10,5]}/><React.Suspense fallback={<Loader/>}><Model url={url}/><OrbitControls/></React.Suspense></Canvas></div>);}
